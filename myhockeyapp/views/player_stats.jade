extends layout

block links
    link(href='/stylesheets/c3.css' rel='stylesheet' type='text/css')
    link(href='/stylesheets/style.css' rel='stylesheet' type='text/css')
        
block scripts    
    script(src='/javascripts/d3.min.js' charset='utf-8' type='text/javascript')
    script(src='/javascripts/c3.min.js' type='text/javascript')
    script(src='/javascripts/jquery-2.2.1.min.js' type='text/javascript')    

block content
    h1= title
    p Welcome to #{title} for player ##{player_id}
    table
        thead
            tr
                th Period
                th Time
                th Kind
                th Score
                th Assist
        tbody
            each stats in data
                if stats.score == player_id
                    tr
                        td #{stats.period}
                        td #{stats.time}
                        td #{stats.kind}
                        td goal
                        td 
                if (stats.assist1 == player_id) || (stats.assist2 == player_id)  
                    tr                      
                        td #{stats.period}
                        td #{stats.time}
                        td #{stats.kind}
                        td 
                        td assist
    div Goals and Assists
    div(id='chart' class='c3chart') 
    script(type='text/javascript').
            var chart = c3.generate({
                bindto: '#chart',
                data: {
                    json: !{JSON.stringify(homescore)},
                    keys: {
                        x:'time',
                        value: ['goal', 'assist'],
                    },
                    type: 'scatter',
                    xFormat: '%M:%S'
                },
                axis: {
                    x: {
                        label:'Time',
                        type: 'timeseries',
                        tick: {
                            format: '%M:%S'
                        }
                    }
                },
                regions: [
                    {axis: 'x', start: '0:00', end: '20:00', class: 'region-period1'},
                    {axis: 'x', start: '20:01', end: '40:00', class: 'region-period2'},
                    {axis: 'x', start: '40:01', end: '60:00', class: 'region-period3'},
                ],
                tooltip: {
                    format: {
                        title: function(d) {
                            var format = d3.time.format('%M:%S');
                            return 'At ' + format(d);
                        },
                        name: function(name, ratio, id, index) {
                            return name;
                        },
                        value: function(value, ratio, id) {
                            if (id == 'goal') {
                                if (value == #{player_id}) {
                                    return 'No assist';
                                } else {
                                    return 'Assist from ' + value;
                                }
                                
                            } else {
                                return 'Assist to ' + value;
                            }
                        }
                    }
                }
            });                           
    table
        tbody
            tr
                td(width='33%')  
                    div Goal By Period          
                    div(id='chart1' class='c3chart') 
                    script(type='text/javascript').
                            var chart = c3.generate({
                                bindto: '#chart1',
                                size: {
                                    height: 240,
                                    width: 240
                                },
                                data: {
                                    json: !{JSON.stringify(goalbyperiod)},
                                    type: 'pie',
                                },
                                pie: {
                                    label: {
                                        format: function(value, ration, id) {
                                            return value;
                                        }
                                    }
                                }
                            });              
                td(width='33%')     
                    div Assist By Period              
                    div(id='chart2' class='c3chart') 
                    script(type='text/javascript').
                            var chart = c3.generate({
                                bindto: '#chart2',
                                size: {
                                    height: 240,
                                    width: 240
                                },                                
                                data: {
                                    json: !{JSON.stringify(assistbyperiod)},
                                    type: 'pie',
                                },
                                pie: {
                                    label: {
                                        format: function(value, ration, id) {
                                            return value;
                                        }
                                    }
                                }
                            });               
                td(width='33%')        
                    div Point By Period                      
                    div(id='chart3' class='c3chart') 
                    script(type='text/javascript').
                            var chart = c3.generate({
                                bindto: '#chart3',
                                size: {
                                    height: 240,
                                    width: 240
                                },                                
                                data: {
                                    json: !{JSON.stringify(pointbyperiod)},
                                    type: 'pie',
                                },
                                pie: {
                                    label: {
                                        format: function(value, ration, id) {
                                            return value;
                                        }
                                    }
                                }
                            });                               
            tr
                td(width='33%')  
                    div Goal By Kind          
                    div(id='chart4' class='c3chart') 
                    script(type='text/javascript').
                            var chart = c3.generate({
                                bindto: '#chart4',
                                size: {
                                    height: 240,
                                    width: 240
                                },
                                data: {
                                    json: !{JSON.stringify(goalbykind)},
                                    type: 'pie',
                                },
                                pie: {
                                    label: {
                                        format: function(value, ration, id) {
                                            return value;
                                        }
                                    }
                                }
                            });                          
                td(width='33%')  
                    div Assist From By Player          
                    div(id='chart5' class='c3chart') 
                    script(type='text/javascript').
                            var chart = c3.generate({
                                bindto: '#chart5',
                                size: {
                                    height: 240,
                                    width: 240
                                },
                                data: {
                                    json: !{JSON.stringify(assistfrombyplayer)},
                                    type: 'pie',
                                },
                                pie: {
                                    label: {
                                        format: function(value, ration, id) {
                                            return value;
                                        }
                                    }
                                }
                            });              
                td(width='33%')     
                    div Assist To By Player              
                    div(id='chart6' class='c3chart') 
                    script(type='text/javascript').
                            var chart = c3.generate({
                                bindto: '#chart6',
                                size: {
                                    height: 240,
                                    width: 240
                                },                                
                                data: {
                                    json: !{JSON.stringify(assisttobyplayer)},
                                    type: 'pie',
                                },
                                pie: {
                                    label: {
                                        format: function(value, ration, id) {
                                            return value;
                                        }
                                    }
                                }
                            });               
            tr                                        
                td(width='33%')        
                    div Penalty By Period                      
                    div(id='chart7' class='c3chart') 
                    script(type='text/javascript').
                            var chart = c3.generate({
                                bindto: '#chart7',
                                size: {
                                    height: 240,
                                    width: 240
                                },                                
                                data: {
                                    json: !{JSON.stringify(penaltybyperiod)},
                                    type: 'pie',
                                },
                                pie: {
                                    label: {
                                        format: function(value, ration, id) {
                                            return value;
                                        }
                                    }
                                }
                            });      
                td(width='33%')        
                    div Penalty in Minutes By Period                      
                    div(id='chart8' class='c3chart') 
                    script(type='text/javascript').
                            var chart = c3.generate({
                                bindto: '#chart8',
                                size: {
                                    height: 240,
                                    width: 240
                                },                                
                                data: {
                                    json: !{JSON.stringify(pimbyperiod)},
                                    type: 'pie',
                                },
                                pie: {
                                    label: {
                                        format: function(value, ration, id) {
                                            return value;
                                        }
                                    }
                                }
                            });   
                td(width='33%')
            tr                            
                td(width='33%')        
                    div Penalty By Kind                      
                    div(id='chart9' class='c3chart') 
                    script(type='text/javascript').
                            var chart = c3.generate({
                                bindto: '#chart9',
                                size: {
                                    height: 240,
                                    width: 480
                                },                                
                                data: {
                                    json: !{JSON.stringify(penaltybykind)},
                                    type: 'pie',
                                },
                                legend: {
                                  position: 'right'  
                                },
                                pie: {
                                    label: {
                                        format: function(value, ration, id) {
                                            return value;
                                        }
                                    }
                                }
                            });              
                td(width='33%')        
                    div Penalty in Minutes By Kind                      
                    div(id='chart10' class='c3chart') 
                    script(type='text/javascript').
                            var chart = c3.generate({
                                bindto: '#chart10',
                                size: {
                                    height: 240,
                                    width: 480
                                },                                
                                data: {
                                    json: !{JSON.stringify(pimbykind)},
                                    type: 'pie',
                                },
                                legend: {
                                  position: 'right'  
                                },
                                pie: {
                                    label: {
                                        format: function(value, ration, id) {
                                            return value;
                                        }
                                    }
                                }
                            });   
                td(width='33%')        
                                                                   