extends layout

block links
    link(href='/stylesheets/c3.css' rel='stylesheet' type='text/css')
    link(href='/stylesheets/style.css' rel='stylesheet' type='text/css')
    link(href="/stylesheets/bootstrap.min.css" rel="stylesheet" type="text/css")
    link(href="/stylesheets/sb-admin.css" rel="stylesheet" type="text/css")        
    link(href="/stylesheets/font-awesome.min.css" rel="stylesheet" type="text/css")        
    
block scripts    
    script(src='/javascripts/d3.min.js' charset='utf-8' type='text/javascript')
    script(src='/javascripts/c3.min.js' type='text/javascript')
    script(src='/javascripts/jquery-2.2.1.min.js' type='text/javascript')    
    script(src='/javascripts/bootstrap.min.js' type='text/javascript')

block content
        div.container-fluid
            div.row
                div.col-md-12
                    h1.page-header #{title}
                    ol.breadcrumb
                        li
                            i.fa.fa-dashboard
                            a(href="/") 
                                | Hockey Stats
                        li
                            i.fa.fa-users
                            a(href="/teamstats") 
                                | Team Stats
            div.row
                div.col-md-12.table-responsive
                    table.table.table-hover
                        thead
                            tr
                                th #
                                th Date
                                th Time
                                th Opponent
                                th Home/Away
                                th Type
                                th Rink
                                th Goals For
                                th Goals Against
                                th Penalty in Minutes
                        tbody
                            each game in game_stats
                                tr
                                    td #{game.number}
                                    td #{game.date}
                                    td #{game.time}
                                    td #{game.opponent}
                                    td #{game.homeaway}
                                    td #{game.kind}
                                    td #{game.rink}
                                    td #{game.gf}
                                    td #{game.ga}
                                    td #{game.pim}
            div.row
                div.col-md-12
                    div.panel.panel-primary
                        div.panel-heading
                            h3.panel-title 
                                i.fa.fa-bar-chart-o 
                                    | Goals For, Goals Against, Penalty in Minutes
                        div.panel-body
                            div(id='chart00' class='c3chart' data-layout='bar' data-xvalue='date' data-yvalues='gf|ga|pim') 
                            script(type='text/javascript').
                                var chartdiv = d3.select('#chart00');
                                var layout = chartdiv.attr('data-layout');
                                var xvalue = chartdiv.attr('data-xvalue');
                                var yvalues = chartdiv.attr('data-yvalues')?chartdiv.attr('data-yvalues').split('|'):null;
                                var chart = c3.generate({
                                    bindto: '#chart00',
                                    data: {
                                        json: !{JSON.stringify(game_stats)},
                                        keys: {
                                            x: xvalue,
                                            value: yvalues,
                                        },
                                        type: layout
                                    },
                                    legend: {
                                        position: 'inset',
                                        inset: {
                                            anchor: 'top-right'
                                        }
                                    },
                                    axis: {
                                        x: {
                                            type: 'category',
                                        }
                                    }
                                }); 
            div.row
                div.col-md-12
                    div.panel.panel-primary
                        div.panel-heading
                            h3.panel-title 
                                i.fa.fa-line-chart 
                                    | Goals For, Goals Against, Penalty in Minutes
                        div.panel-body
                            div(id='chart10' class='c3chart' data-layout='timeseries' data-xvalue='date' data-yvalues='gf|ga|pim')                                      
                            script(type='text/javascript').
                                var chartdiv1 = d3.select('#chart10');
                                var layout1 = chartdiv1.attr('data-layout');
                                var xvalue1 = chartdiv1.attr('data-xvalue');
                                var yvalues1 = chartdiv1.attr('data-yvalues')?chartdiv1.attr('data-yvalues').split('|'):null;
                                var chart1 = c3.generate({
                                    bindto: '#chart10',
                                    data: {
                                        json: !{JSON.stringify(game_stats)},
                                        keys: {
                                            x: xvalue1,
                                            value: yvalues1
                                        }
                                    },
                                    legend: {
                                        position: 'inset',
                                        inset: {
                                            anchor: 'top-right'
                                        }
                                    },                        
                                    axis: {
                                        x: {
                                            type: layout1,
                                            tick: {
                                                format: '%Y-%m-%d'
                                            }
                                        }
                                    }
                                });
            div.row
                div.col-md-12
                    div.panel.panel-primary
                        div.panel-heading
                            h3.panel-title 
                                i.fa.fa-area-chart 
                                    | Goals For, Goals Against, Penalties
                        div.panel-body       
                            div(id='chart20' class='c3chart') 
                            script(type='text/javascript').
                                    var chart = c3.generate({
                                        bindto: '#chart20',
                                        data: {
                                            json: !{JSON.stringify(team_time_stats)},
                                            keys: {
                                                x:'time',
                                                value: ['goal', 'opponentgoal', 'penalty'],
                                            },
                                            type: 'scatter',
                                            xFormat: '%M:%S'
                                        },
                                        legend: {
                                            position: 'bottom'
                                        },                            
                                        axis: {
                                            x: {
                                                label:'Time',
                                                type: 'timeseries',
                                                tick: {
                                                    format: '%M:%S'
                                                }
                                            }
                                        },
                                        regions: [
                                            {axis: 'x', start: '0:00', end: '20:00', class: 'region-period1'},
                                            {axis: 'x', start: '20:01', end: '40:00', class: 'region-period2'},
                                            {axis: 'x', start: '40:01', end: '60:00', class: 'region-period3'},
                                        ],
                                        tooltip: {
                                            format: {
                                                title: function(d) {
                                                    var format = d3.time.format('%M:%S');
                                                    return 'At ' + format(d);
                                                },
                                                name: function(name, ratio, id, index) {
                                                    return name;
                                                },
                                                value: function(value, ratio, id) {
                                                    if (id == 'goal') {
                                                        return 'Goal scored by player #' + value;
                                                    } else if (id == 'opponentgoal') {
                                                        return 'Opponent Goal scored by player #' + value;
                                                    } else if (id == 'penalty') {
                                                        return 'Penalty taken by player #' + value;
                                                    } else {
                                                        return '';
                                                    }
                                                }                        
                                            }
                                        }
                                    });  
            div.row
                div.col-md-4
                    div.panel.panel-green
                        div.panel-heading
                            h3.panel-title 
                                i.fa.fa-pie-chart 
                                    | Goals By Period   
                        div.panel-body       
                            div(id='chart30' class='c3chart') 
                            script(type='text/javascript').
                                var chart = c3.generate({
                                    bindto: '#chart30',
                                    size: {
                                        height: 240,
                                        width: 240
                                    },
                                    data: {
                                        json: !{JSON.stringify(goalbyperiod)},
                                        type: 'pie',
                                    },                                
                                    pie: {
                                        label: {
                                            format: function(value, ration, id) {
                                                return value;
                                            }
                                        }
                                    }
                                });              
                div.col-md-8
                    div.panel.panel-green
                        div.panel-heading
                            h3.panel-title 
                                i.fa.fa-pie-chart 
                                    | Goals By Kind   
                        div.panel-body                
                            div(id='chart31' class='c3chart') 
                            script(type='text/javascript').
                                var chart = c3.generate({
                                    bindto: '#chart31',
                                    size: {
                                        height: 240,
                                        width: 480
                                    },                                
                                    data: {
                                        json: !{JSON.stringify(goalbykind)},
                                        type: 'pie',
                                    },
                                    legend: {
                                        position: 'right'  
                                    },                                    
                                    pie: {
                                        label: {
                                            format: function(value, ration, id) {
                                                return value;
                                            }
                                        }
                                    }
                                });
            div.row
                div.col-md-4     
                    div.panel.panel-green
                        div.panel-heading
                            h3.panel-title 
                                i.fa.fa-pie-chart 
                                    | Penalties By Period   
                        div.panel-body                       
                            div(id='chart40' class='c3chart') 
                            script(type='text/javascript').
                                var chart = c3.generate({
                                    bindto: '#chart40',
                                    size: {
                                        height: 240,
                                        width: 240
                                        },                                
                                        data: {
                                            json: !{JSON.stringify(penaltybyperiod)},
                                            type: 'pie',
                                        },                          
                                        pie: {
                                            label: {
                                                format: function(value, ration, id) {
                                                    return value;
                                                }
                                            }
                                        }
                                    });                               
                div.col-md-8 
                    div.panel.panel-green
                        div.panel-heading
                            h3.panel-title 
                                i.fa.fa-pie-chart 
                                    | Penalties By Kind   
                        div.panel-body                          
                            div(id='chart41' class='c3chart') 
                            script(type='text/javascript').
                                var chart = c3.generate({
                                    bindto: '#chart41',
                                    size: {
                                        height: 240,
                                        width: 480
                                    },                                
                                    data: {
                                        json: !{JSON.stringify(penaltybykind)},
                                        type: 'pie',
                                    },
                                    legend: {
                                        position: 'right'  
                                    },
                                    pie: {
                                        label: {
                                            format: function(value, ration, id) {
                                                return value;
                                            }
                                        }
                                    }
                                });
            div.row
                div.col-md-4
                    div.panel.panel-green
                        div.panel-heading
                            h3.panel-title 
                                i.fa.fa-pie-chart 
                                    | Penalty In Minutes By Period   
                        div.panel-body               
                            div(id='chart50' class='c3chart') 
                            script(type='text/javascript').
                                var chart = c3.generate({
                                    bindto: '#chart50',
                                    size: {
                                        height: 240,
                                        width: 240
                                    },                                
                                    data: {
                                        json: !{JSON.stringify(pimbyperiod)},
                                        type: 'pie',
                                    },                     
                                    pie: {
                                        label: {
                                            format: function(value, ration, id) {
                                                return value;
                                            }
                                        }
                                    }
                                });                  
                div.col-md-8                                                         
                    div.panel.panel-green
                        div.panel-heading
                            h3.panel-title 
                                i.fa.fa-pie-chart 
                                    | Penalty In Minutes By Kind   
                        div.panel-body                    
                            div(id='chart51' class='c3chart') 
                            script(type='text/javascript').
                                var chart = c3.generate({
                                    bindto: '#chart51',
                                    size: {
                                        height: 240,
                                        width: 480
                                    },                                
                                    data: {
                                        json: !{JSON.stringify(pimbykind)},
                                        type: 'pie',
                                    },
                                    legend: {
                                        position: 'right'  
                                    },
                                    pie: {
                                        label: {
                                            format: function(value, ration, id) {
                                                return value;
                                            }
                                        }
                                    }
                                });     
